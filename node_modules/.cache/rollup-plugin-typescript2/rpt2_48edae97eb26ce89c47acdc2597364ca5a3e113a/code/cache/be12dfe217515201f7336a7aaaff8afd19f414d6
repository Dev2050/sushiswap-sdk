{"code":"import { Price } from './Price';\r\nimport invariant from 'tiny-invariant';\r\nexport class Route {\r\n    constructor(pairs, input, output) {\r\n        this._midPrice = null;\r\n        invariant(pairs.length > 0, 'PAIRS');\r\n        const chainId = pairs[0].chainId;\r\n        invariant(pairs.every(pair => pair.chainId === chainId), 'CHAIN_IDS');\r\n        const wrappedInput = input.wrapped;\r\n        invariant(pairs[0].involvesToken(wrappedInput), 'INPUT');\r\n        invariant(typeof output === 'undefined' ||\r\n            pairs[pairs.length - 1].involvesToken(output.wrapped), 'OUTPUT');\r\n        const path = [wrappedInput];\r\n        for (const [i, pair] of pairs.entries()) {\r\n            const currentInput = path[i];\r\n            invariant(currentInput.equals(pair.token0) || currentInput.equals(pair.token1), 'PATH');\r\n            const output = currentInput.equals(pair.token0)\r\n                ? pair.token1\r\n                : pair.token0;\r\n            path.push(output);\r\n        }\r\n        this.pairs = pairs;\r\n        this.path = path;\r\n        this.input = input;\r\n        this.output = output;\r\n    }\r\n    get midPrice() {\r\n        if (this._midPrice !== null)\r\n            return this._midPrice;\r\n        const prices = [];\r\n        for (const [i, pair] of this.pairs.entries()) {\r\n            prices.push(this.path[i].equals(pair.token0)\r\n                ? new Price(pair.reserve0.currency, pair.reserve1.currency, pair.reserve0.quotient, pair.reserve1.quotient)\r\n                : new Price(pair.reserve1.currency, pair.reserve0.currency, pair.reserve1.quotient, pair.reserve0.quotient));\r\n        }\r\n        const reduced = prices\r\n            .slice(1)\r\n            .reduce((accumulator, currentValue) => accumulator.multiply(currentValue), prices[0]);\r\n        return (this._midPrice = new Price(this.input, this.output, reduced.denominator, reduced.numerator));\r\n    }\r\n    get chainId() {\r\n        return this.pairs[0].chainId;\r\n    }\r\n}\r\n//# sourceMappingURL=Route.js.map","references":["/Users/fisseha/sushiswap-git/sushiswap-sdk/src/entities/Currency.ts","/Users/fisseha/sushiswap-git/sushiswap-sdk/src/entities/Pair.ts","/Users/fisseha/sushiswap-git/sushiswap-sdk/src/entities/Price.ts","/Users/fisseha/sushiswap-git/sushiswap-sdk/src/entities/Token.ts","/Users/fisseha/sushiswap-git/sushiswap-sdk/node_modules/tiny-invariant/dist/tiny-invariant.d.ts"],"map":"{\"version\":3,\"file\":\"Route.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/entities/Route.ts\"],\"names\":[],\"mappings\":\"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\"}"}
